# go-SimplerMongo

## 前要

_为更容易操作[Mongodb Atlas](https://www.mongodb.com/atlas)而构建此包，目前不完善。_

_关于Mongodb的操作详情，请前往[MongoDB Go Driver — Go](https://www.mongodb.com/docs/drivers/go/v1.8/)_

## 引入

安装此包

```shell copy
go get github.com/STARTRACEX/go-SimplerMongo
```

在项目中引入

```go copy
import (
 "fmt"
 "go.mongodb.org/mongo-driver/bson"
   FUNCNAME "github.com/STARTRACEX/go-SimplerMongo"
)
```

或

拷贝dbfunc.go到您的目录中,安装不存在的包依赖（如有）

```shell copy
go mod tidy
```

## 初始化

```go copy
const URI = "Connection uri ....... "

defer func() {
  if r := recover(); r != nil {
   fmt.Println("Received panic:", r)
  }
}()

client := FUNCNAME.InitClientWithOptions(URI)
collection := client.Database("...").Collection("...")
defer FUNCNAME.CloseClient(client)

   /* 
      ...
   */
```

## 部分预览

```go
// 传入连接地址,初始化并返回客户端
func InitClient(URI string) *mongo.Client 
// 传入连接地址,定时初始化并返回客户端
func InitClientWithOptions(URI string) *mongo.Client
// 关闭客户端，返回错误
func CloseClient(client *mongo.Client) error
// 查找满足filter的第一个数据并返回
func Find(collection *mongo.Collection, filter interface{}) primitive.M
// 查找满足filter的数据并返回
func FindM(collection *mongo.Collection, filter interface{}) []primitive.M
// 添加一个数据
func Add(collection *mongo.Collection, data interface{})
// 添加多个数据
func AddM(collection *mongo.Collection, data []interface{}) 
// 对满足filter的数据更新为update，返回修改数
func Update(collection *mongo.Collection, filter, update interface{}) int64
// 删除满足filter的数据,返回删除数
func Delete(collection *mongo.Collection, filter interface{}) int64
```
